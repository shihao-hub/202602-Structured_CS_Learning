# 操作系统 - 磁盘调度与死锁处理模块

本模块实现了操作系统中的磁盘调度算法和死锁处理机制，涵盖计算机考研408考试的核心知识点。

## 📁 模块结构

- `disk_scheduler.go` - 磁盘调度算法实现
- `deadlock.go` - 死锁处理（银行家算法、死锁检测）
- `example.go` - 示例程序入口

## 📚 知识点覆盖

### 1. 磁盘调度算法

#### FCFS (First Come First Served)
- **原理**: 按请求到达顺序服务
- **优点**: 公平、简单、无饥饿
- **缺点**: 平均寻道时间长
- **408考点**: 最基础的调度算法，作为对比基准

#### SSTF (Shortest Seek Time First)
- **原理**: 优先服务距离当前磁头最近的请求（贪心算法）
- **优点**: 平均寻道时间短，吞吐量高
- **缺点**: 可能产生饥饿现象
- **408考点**: 贪心策略的应用，饥饿问题

#### SCAN (电梯算法)
- **原理**: 磁头在一个方向上移动，服务路径上所有请求，到达边界后反向
- **优点**: 避免饥饿，寻道性能较好
- **缺点**: 对边缘磁道和中间磁道不公平
- **408考点**: 双向扫描，公平性分析

#### C-SCAN (循环扫描)
- **原理**: 单向扫描，到达边界后直接返回起始端继续扫描
- **优点**: 对所有磁道更加公平
- **缺点**: 返回起始端的空移动增加总寻道时间
- **408考点**: 循环结构，公平性改进

#### LOOK
- **原理**: 改进的SCAN，磁头不必到达边界，只需到达该方向最远的请求
- **优点**: 减少不必要的边界移动
- **408考点**: SCAN的优化版本

#### C-LOOK
- **原理**: 循环LOOK，结合C-SCAN和LOOK的优点
- **优点**: 性能最优
- **408考点**: 综合优化算法

### 2. 死锁处理

#### 死锁的四个必要条件
1. **互斥**: 资源不能共享
2. **占有并等待**: 进程持有资源同时等待新资源
3. **非抢占**: 资源不能被强制剥夺
4. **循环等待**: 存在进程资源的环形等待链

#### 银行家算法 (Banker's Algorithm)
- **核心**: 资源分配前进行安全性检查
- **关键数据结构**:
  - `Available`: 可用资源向量
  - `Max`: 最大需求矩阵
  - `Allocation`: 已分配矩阵
  - `Need`: 需求矩阵 (Need = Max - Allocation)
- **安全状态**: 存在安全序列，使所有进程都能顺利完成
- **408考点**: 
  - 安全性算法的执行过程
  - 资源请求的处理流程
  - 安全序列的计算

#### 死锁检测
- **原理**: 类似银行家算法的安全性检查
- **检测方法**: 不能完成的进程即为死锁进程
- **408考点**: 资源分配图、死锁识别

## 🎯 408考试重点

### 磁盘调度
| 知识点 | 考查频率 | 题型 |
|--------|---------|------|
| 算法对比分析 | ⭐⭐⭐⭐⭐ | 选择题、综合题 |
| 寻道距离计算 | ⭐⭐⭐⭐⭐ | 计算题 |
| 饥饿现象判断 | ⭐⭐⭐ | 选择题 |
| 算法适用场景 | ⭐⭐⭐⭐ | 综合题 |

### 死锁处理
| 知识点 | 考查频率 | 题型 |
|--------|---------|------|
| 死锁四个必要条件 | ⭐⭐⭐⭐⭐ | 选择题 |
| 银行家算法安全性检查 | ⭐⭐⭐⭐⭐ | 大题 |
| 资源请求判断 | ⭐⭐⭐⭐⭐ | 计算题 |
| Need矩阵计算 | ⭐⭐⭐⭐ | 计算题 |
| 死锁检测与恢复 | ⭐⭐⭐ | 综合题 |

## 💡 常考题型示例

### 题型1: 磁盘调度计算
**题目**: 给定磁头初始位置53，磁道请求序列[98, 183, 37, 122, 14, 124, 65, 67]，磁盘大小200磁道，使用SCAN算法，计算总寻道距离。

**考点**: SCAN算法执行过程、寻道距离计算

### 题型2: 银行家算法安全性检查
**题目**: 给定系统状态（Max、Allocation、Available矩阵），判断系统是否安全，若安全给出一个安全序列。

**考点**: 安全性算法、安全序列构造

### 题型3: 资源请求判断
**题目**: 在给定系统状态下，某进程请求资源向量Request，判断是否能立即分配。

**考点**: 银行家算法完整流程

## 🚀 使用方法

```go
package main

import (
    "Structured_CS_Learning/CS_Core_Courses/operating_system/scheduling"
)

func main() {
    // 运行所有示例
    scheduling.RunAllSchedulingExamples()
}
```

## 📖 学习建议

1. **掌握基础概念**: 理解每种算法的原理和特点
2. **对比分析**: 重点掌握各算法的优缺点和适用场景
3. **手工计算**: 练习磁盘调度的寻道距离计算
4. **银行家算法**: 熟练掌握安全性算法的执行步骤
5. **真题练习**: 多做历年真题，总结常见考点

## 📝 相关资源

- 《操作系统概念》第9章 - 虚拟内存管理
- 《操作系统考研辅导》第5章 - 存储管理
- 408真题中的磁盘调度和死锁相关题目
